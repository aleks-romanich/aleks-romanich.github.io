function drawBall(){ctx.beginPath(),ctx.arc(x,y,ballRadius,0,2*Math.PI),ctx.fillStyle="#777",ctx.shadowBlur=10,ctx.shadowOffsetX=5,ctx.shadowOffsetY=5,ctx.shadowColor="#999",ctx.fill(),ctx.closePath()}function drawPaddle(){ctx.beginPath(),ctx.rect(paddleX,canvas.height-paddleHeight,paddleWidth,paddleHeight),ctx.fillStyle="#777",ctx.fill(),ctx.closePath()}function keyDownHandler(e){39==e.keyCode?rightPressed=!0:37==e.keyCode&&(leftPressed=!0)}function keyUpHandler(e){39==e.keyCode?rightPressed=!1:37==e.keyCode&&(leftPressed=!1)}function drawBricks(){for(c=0;c<brickColumnCount;c++)for(r=0;r<brickRowCount;r++)if(1==bricks[c][r].status){var e=c*(brickWidth+brickPadding)+brickOffsetLeft,t=r*(brickHeight+brickPadding)+brickOffsetTop;bricks[c][r].x=e,bricks[c][r].y=t,ctx.beginPath(),ctx.rect(e,t,brickWidth,brickHeight),ctx.fillStyle="#777",ctx.fill(),ctx.closePath()}}function collisionDetection(){for(c=0;c<brickColumnCount;c++)for(r=0;r<brickRowCount;r++){var e=bricks[c][r];1==e.status&&x>e.x&&x<e.x+brickWidth&&y>e.y&&y<e.y+brickHeight&&(dy=-dy,e.status=0)}}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),drawBricks(),drawBall(),drawPaddle(),collisionDetection(),(x+dx>canvas.width-ballRadius||x+dx<ballRadius)&&(dx=-dx),y+dy<ballRadius?dy=-dy:y+dy>canvas.height-ballRadius&&(x>paddleX&&x<paddleX+paddleWidth?(y-=paddleHeight)&&(dy=-dy):(console.log("game over"),ctx.strokeStyle="#777",ctx.font="bold 30px sans-serif",ctx.strokeText("game over",170,200),clearInterval(refreshInterval))),rightPressed&&paddleX<canvas.width-paddleWidth?paddleX+=7:leftPressed&&paddleX>0&&(paddleX-=7),x+=dx,y+=dy}function reload(){document.location.reload()}var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),x=canvas.width/2,y=canvas.height-30,dx=2,dy=-2,ballRadius=10,paddleHeight=6,paddleWidth=100,paddleX=(canvas.width-paddleWidth)/2,rightPressed=!1,leftPressed=!1,brickRowCount=3,brickColumnCount=14,brickWidth=20,brickHeight=20,brickPadding=10,brickOffsetTop=30,brickOffsetLeft=35,refreshInterval;document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1);var bricks=[];for(c=0;c<brickColumnCount;c++)for(bricks[c]=[],r=0;r<brickRowCount;r++)bricks[c][r]={x:0,y:0,status:1};refreshInterval=setInterval(draw,10);var btn=document.createElement("button");document.body.appendChild(btn),btn.classList.add("btn"),btn.appendChild(document.createTextNode("start game")),btn.addEventListener("click",reload);
